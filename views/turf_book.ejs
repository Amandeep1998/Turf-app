<% include _layouts/header %>
<div class="row">
  <div class="col-md-12 col-xs-12">
    <form method="post" action="/turf/book/<%=id%>">
      <div class="form-group">
        <h4>User Name : User Name</h4>
      </div>
      <div class="form-group">
        <h4>Turf Name : <%= turf.turfName %></h4>
      </div>
      <div class="form-group">
        <label>Mobile Number</label>
        <input class="form-control" pattern=".{10,}" required title="Invalid Mobile Number" name="mobilenumber" value="9833908356">
      </div>
      <div class="form-group">
        <table class="table table-striped table-sm">
          <tr>
            <th colspan="6" class="text-center">Select Timings</th>
          </tr>
          <tr>
            <td>
              <table class="table table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th colspan="2">Morning Time</th>
                  </tr>
                </thead>
                <tr>
                  <td>Time</td>
                  <td>Price</td>
                </tr>
                <% morningTimeArray.forEach(function(time) { %>
                  <tr>
                    <td><button id="timings" type="button" class="btn btn-outline-info"><%= time.time%></button></td>
                    <td><%= time.price%></td>
                  </tr>
                <% }) %>
              </table>
            </td>
            <td>
              <table class="table table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th colspan="2">Evening Time</th>
                  </tr>
                </thead>
                <tr>
                  <td>Time</td>
                  <td>Price</td>
                </tr>
                <% eveningTimeArray.forEach(function(time) { %>
                  <tr>
                    <td><button id="timings" type="button" class="btn btn-outline-info"><%= time.time%></button></td>
                    <td><%= time.price%></td>
                  </tr>
                <% }) %>
              </table>
            </td>
            <td>
              <table class="table table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th colspan="2">Night Time</th>
                  </tr>
                </thead>
                <tr>
                  <td>Time</td>
                  <td>Price</td>
                </tr>
                <% nightTimeArray.forEach(function(time) { %>
                  <tr>
                    <td><button id="timings" type="button" class="btn btn-outline-info"><%= time.time%></button></td>
                    <td><%= time.price%></td>
                  </tr>
                <% }) %>
              </table>
            </td>
          </tr>
          <tr>
            <td colspan="6" class="text-center"><button type="submit" class="btn btn-success checkout">Proceed to Checkout</button></td>
          </tr>
        </table>
      </div>
      <div style="display:none;">
        <input class="hidden-field" type="hidden" name="timings">
      </div>
    </form>
  </div>
</div>
<% include _layouts/footer %>
<script>
  $(function() {
    var timings = [];
    $('button#timings').click(function() {
      var text = $(this).text();
      $(this).toggleClass('active');
      if($(this).hasClass('active')) {
        timings.push(text);
      } else {
        var newTimings = timings.filter(function(time){
          return time !== text;
        })
        timings = newTimings;
      }
    });

    $('button.checkout').click(function() {
      $('.hidden-field').val(JSON.stringify(timings));//To pass array use JSOn.stringify
    });

  })
</script>
